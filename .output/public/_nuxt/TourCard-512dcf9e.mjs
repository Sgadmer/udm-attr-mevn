import{_ as N,d as g,G as B,t as O,H as p,C as D,o as l,m as f,e as s,n as o,D as d,g as e,b as u,w as n,c as I,f as i,I as v,J as M,i as h}from"./entry-092ad450.mjs";import{f as x,E as A,_ as L}from"./helpers-3d15a799.mjs";const b=g({__name:"TourCard",props:{type:{default:"common"},data:{default:()=>({})}},setup(E,{expose:r,emit:k}){r();const a=E,_=B(),C=O(),t=p(),c=D(()=>{let T=!0;return a.data.tourists.forEach(y=>{y.touristId._id==t.getUserInfo.info._id&&(T=y.bookStatus==="CANCELED")}),T}),S={$p:a,$e:k,$modalsStore:_,$toursStore:C,$userStore:t,compCurrentTouristBookStatus:c,handleModalOpen:T=>{C.setSelectedTourId(a.data._id),_.setCurrentModalName(T)},handleBookModalOpen:()=>{t.getUserInfo.info?(C.setSelectedTourId(a.data._id),_.setCurrentModalName(M.BookingConfirmModal)):_.setCurrentModalName(M.LoginModal)},$s:v,EModalsNames:M,formatJSONDate:x,EStatus:A};return Object.defineProperty(S,"__isScriptSetup",{enumerable:!1,value:!0}),S}}),J=["src"],V=e(" \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435 "),F=e(" \u0417\u0430\u0431\u0440\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u0442\u044C "),P=e(" \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435 "),U=e(" \u041F\u043E\u0434\u0440\u043E\u0431\u043D\u0435\u0435 "),w=e(" \u0422\u0443\u0440\u0438\u0441\u0442\u044B ");function K(E,r,k,a,_,C){const t=h,c=L;return l(),f("div",{class:o(a.$s.TourCard)},[s("img",{src:a.$p.data.mainPhoto,alt:"tour card image",class:o(a.$s.TourCard__Image)},null,10,J),s("div",{class:o(a.$s.TourCard__Promo)},[s("h3",{class:o(a.$s.TourCard__Title)},d(a.$p.data.title),3),s("p",{class:o(a.$s.TourCard__Description)},d(a.$p.data.desc),3)],2),s("div",{class:o(a.$s.TourCard__Info)},[s("p",{class:o([a.$s.TourCard__InfoItem,a.$s.TourCard__InfoItem_Cut])},d(a.$p.data.place),3),s("p",{class:o(a.$s.TourCard__InfoItem)},d(a.formatJSONDate(a.$p.data.dateStart))+" - "+d(a.formatJSONDate(a.$p.data.dateEnd)),3),s("p",{class:o(a.$s.TourCard__InfoItem)},[e(d(a.$p.data.price)+" \u20BD / ",1),s("small",{class:o(a.$s.TourCard__InfoSmall)},"\u043D\u0430 1 \u0447\u0435\u043B\u043E\u0432\u0435\u043A\u0430",2)],2)],2),a.$p.type==="common"?(l(),f("div",{key:0,class:o(a.$s.TourCard__Controls)},[u(t,{kind:"Secondary",corners:"Md",onClick:r[0]||(r[0]=m=>a.handleModalOpen(a.EModalsNames.TourModal)),class:o(a.$s.TourCard__Control)},{default:n(()=>[V]),_:1},8,["class"]),a.$userStore.getIsTourist?(l(),I(t,{key:0,kind:"Main",corners:"Md",onClick:a.handleBookModalOpen,class:o(a.$s.TourCard__Control)},{default:n(()=>[F]),_:1},8,["class"])):i("",!0)],2)):i("",!0),a.$p.type==="tourist"?(l(),f("div",{key:1,class:o(a.$s.TourCard__Controls)},[s("div",{class:o(a.$s.TourCard__TagsWrapper)},[u(c,{type:a.$p.data.status,class:o(a.$s.TourCard__Tag)},{default:n(()=>[e(d(a.EStatus[a.$p.data.status]),1)]),_:1},8,["type","class"]),a.compCurrentTouristBookStatus?(l(),I(c,{key:0,type:"BOOK_CANCELED",class:o(a.$s.TourCard__Tag)},{default:n(()=>[e(d(a.EStatus.BOOK_CANCELED),1)]),_:1},8,["class"])):i("",!0)],2),u(t,{kind:"Main",corners:"Md",onClick:r[1]||(r[1]=m=>a.handleModalOpen(a.EModalsNames.TourModal)),class:o(a.$s.TourCard__Control)},{default:n(()=>[P]),_:1},8,["class"])],2)):i("",!0),a.$p.type==="agent"||a.$p.type==="admin"?(l(),f("div",{key:2,class:o(a.$s.TourCard__Controls)},[u(c,{type:a.$p.data.status,class:o([a.$s.TourCard__Tag,a.$s.TourCard__TagsWrapper])},{default:n(()=>[e(d(a.EStatus[a.$p.data.status]),1)]),_:1},8,["type","class"]),u(t,{kind:"Secondary",corners:"Md",onClick:r[2]||(r[2]=m=>a.handleModalOpen(a.EModalsNames.TourModal)),class:o(a.$s.TourCard__Control)},{default:n(()=>[U]),_:1},8,["class"]),u(t,{kind:"Main",corners:"Md",onClick:r[3]||(r[3]=m=>a.handleModalOpen(a.EModalsNames.TouristsListModal)),class:o(a.$s.TourCard__Control)},{default:n(()=>[w]),_:1},8,["class"])],2)):i("",!0)],2)}var G=N(b,[["render",K]]);export{G as default};
